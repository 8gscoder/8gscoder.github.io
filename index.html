<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"qmloong.github.io","root":"/","scheme":"Pisces","version":"8.0.0-rc.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":"mac"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"manual"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Love is a heroic dream in a tired life.🐬">
<meta property="og:type" content="website">
<meta property="og:title" content="qmloong&#39;s Blog">
<meta property="og:url" content="https://qmloong.github.io/index.html">
<meta property="og:site_name" content="qmloong&#39;s Blog">
<meta property="og:description" content="Love is a heroic dream in a tired life.🐬">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="menglong">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://qmloong.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>qmloong's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
        <span class="toggle-line toggle-line-first"></span>
        <span class="toggle-line toggle-line-middle"></span>
        <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">qmloong's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://qmloong.github.io/2020/07/13/life/%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="menglong">
      <meta itemprop="description" content="Love is a heroic dream in a tired life.🐬">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qmloong's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/07/13/life/%E8%AE%B0/" class="post-title-link" itemprop="url">life/记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-07-13 18:06:35 / 修改时间：23:46:49" itemprop="dateCreated datePublished" datetime="2020-07-13T18:06:35+08:00">2020-07-13</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="记"><a href="#记" class="headerlink" title="记"></a>记</h1><p>​    “滴滴滴，密码正确请进”</p>
<p>​    一股蒙热潮气带着一点点霉味扑面而来，第一次这么想回到这个8平左右的小房间里…终于tm的到家了</p>
<p>​    骚骚过生日，丫的他兴奋的不行，叫我去无锡找他玩，也好久没见了，过年因为疫情都没有好好聚聚，感觉也得个大半年没见了。本来想国庆再回趟家的一起玩的，毕竟我老姐生娃，第一次当舅舅都没有回去看她，因为这货过个散生日请假跑回南京有点过分，但是再加上自己2020/H1刚考核结束薪资调了一波还可：），自己飘了，释压一下去浪一下，也行吧。</p>
<blockquote>
<p>9号晚上7:15飞南京，10号中午去苏州看下刚出生的小塞班，傍晚去无锡找骚骚，12号中午从无锡回南京，陪陪二姐晚上飞回深圳</p>
</blockquote>
<p>​    万万没想到事情安排满满当当，中间却来了那么多乱七八糟的事情。</p>
<p>​    10号到无锡的时候，居然发现无锡人民95%都没有带口罩，出高铁的时候，非要注册“锡康码”才可换去一张像酒店色情小广告一样的卡片，在出站口的时候把卡片丢进纸盒即可出站，这矫情的苏南人做事情也是这么矫情。</p>
<p>​    遇到骚骚之后，看他那球样还是商务风，一点也没变，还是那么骚气，我心里有些事情导致不是特别的开心，一起吃海底捞、唱歌也没有很放的开，就特别想喝点酒，后来去了一家气氛还可的小酒吧pub喝了点才放开点。其实我是比较想先聊聊天的啦，聊一聊最近过得咋样啊，喝点酒就想bb，不亏是我，但是其实也没聊多少，好朋友一起玩的多了还是比较熟，而且骚骚可能也比较内心保守，许多事情他也不愿意当着syl面前聊，虽然我是觉得无所谓的。只是谈及到结婚的问题之后发现骚骚也有在担心的问题，虽然家里可能有点钱，但是精神小伙也4有尊严滴，想自己owner起来，不想结婚还要花家里钱。可能就是这样，家境差一点早熟一点的孩子在工作之前在学校无论是大学还是高中的时候，都是在愁后面我没钱怎么办，以后一个月工资都不够换房贷怎么办，拿着家里一个月1000块的生活费，手机屏摔坏了连着给小米4换6块山寨屏也暂不出钱换手机，曾经最惨的时候2天就花了9块钱（一是当时没钱二是真不想吃饭哈），而家境好一点的孩子成熟一点的孩子工作之前焦点可能就是放在我的生活该怎么样才有意思，花钱没压力。但是反而工作之后现在薪资可能是比骚骚高好多，我对于钱的认知越来越模糊，或者说金钱观变的有点不太正常了，现在觉得赚那些钱又有什么意思呢？花钱也有点大手大脚的，用我们沭阳话说就是烧不熟、火烧火燎的，但是骚骚对钱的认知应该是在我之上的，他工作之后思想独立，虽然不至于说不拿家里一分钱但是起码有自己的意识（即使我还是很反感骚骚到哪都抢着付钱的做法）。我一直都觉得我们家其实也不穷，但是有些观念，有些意识入了你的脑子，他一辈子都改不了，思考了一下发现我的金钱观应该是有问题的，无论是学生时代，还是工作之后，都隐隐约约透露着一点病态。</p>
<p>​    之后我们去宾馆打掼蛋（一种淮安扑克的玩法），不得不说骚骚给我们定的宾馆还是挺不错的哈，高大上，书记做事情还是挺靠谱的。</p>
<p>​    //TODO 越季酒店pic</p>
<p>​    第二天起来，眼睛还没睁开就听见小舒怡说骚骚给点了早餐外卖，里面有我最喜欢的汤包，还有些肯德基的早餐。哇咔咔，香。</p>
<p>​    起来之后，饭点了，到楼下，才知道原来骚骚是开车来的无锡，丫的，这货给我的感觉咋让我感觉自己是小p孩，毕竟我连驾照都没考hh，人家都开车自己来无锡了，我们坐上骚骚的小广本，去往syl的阿姨在太湖景区里的饭店吃饭。一路上车里放的全是骚骚的歌，几人开开心心的去“樱花山庄”了。他那一路车开的还是那个球样，跟高中时候坐他的骚紫的电瓶车一样——需要自备塑料袋。</p>
<p>​    到之后见到了syl的阿姨和樱花山庄，感觉和syl气质上有点像，给我感觉有点那种日本女人的感觉，干净、端庄、优雅。我是不太会酒桌上这些乱七八糟的礼仪的，骚骚是很不错的，相比我肯定老练太多，她阿姨还夸骚骚情商高了，hh。后面就是在太湖景区里面逛园子。无锡那边的雨天跟深圳一样烦人，走点路浑身就胶黏的。</p>
<p>​    晚上的时候又遇到了问题，日常骚骚发脾气，就因为分开打车错了地址，两个地方还很近，syl和小舒怡还有个myq，三个女人一块，大概是聊天聊上了，没有接到电话，骚骚就大发脾气，后来电话打通了上来一顿骂，见面了也是一顿冷眼。然后一起去想吃的那家韩式料理发现人超多，要排两个小时队，最后无奈去了一家没啥人的牛蛙，两个人都在那摆着冷脸，看骚骚那样都要掀桌子了。我也是醉了，那会儿我觉得他情商是负数…无论是什么原因，这架吵成这样是有原因的，骚骚在我这里看来最大的问题就是太自我，控制欲太强，太大男子主义，家庭环境影响、自己的性格原因、自己接触的周围那帮人。我很想推荐他看看那本书，前几个习惯都是在讲关于如何“修身”的，印象特别深的积极主动和以终为始，我每次吵完架我经常特别的内疚，后来听我导师推荐了这本书之后我慢慢的发现问题的所在，之前什么所谓的换位思考，居然得到了理论支撑，而且如果你每次都以一套处事方式来思考自身的话，你会发现所有的问题都可以套进去，无非就是自己总结一下思考这次为什么吵架？带来的影响是什么？是好是坏？后续怎么才能不吵架？现在我慢慢开始觉得生活中的一些你可能感到很匪夷所思的事情，都是可以从中学到东西或者找到一些方式去解决、避免的。如果你觉得吵架不好，那么你给自己下的目标首先应该是以后不吵架，但是许多人往往可能就定下这个目标之后就没有任何的改变，甚至在又一次吵架的时候更加自责、更加质疑自己为人，但是其实最重要的原因就是没有深入去思考这次为什么吵架，解决吵架最根本的原因绝不是你意识到吵架不好以后不能吵架，而且要主动去fix一下这次遇到的问题。具体怎么做的话，我是觉得说出来很可笑，那其实就是：1.做好自己2.换位思考。对应的就是积极主动和以终为始。你如果想改变别人，让别人不跟你吵架，首先你得先从自己出发啊，你自己就没有一点问题吗？在这次吵架中，不考虑别人做的不对的地方，你自己有哪些不对的先想想？至于如果你综合思考之后发现对方更离谱的话，那可能真的就不适合在一块了。其次再换位思考一下，你可能比较好奇人家为什么这次突然就不说话，不主动去“哄”你了，可能是人家对你已经放弃治疗了，也可能是因为周围环境因素，比如有朋友在人家都是爱面子的，为什么要过来哄你一个男生。。算了不多比比了，总之男女之间的吵架也是值得深究的一门学科，如何吵好架，值得自己好好摸索摸索…</p>
<p>​    之后终于喝了点啤酒，加上我们稍微缓和缓和气氛，两人才开口说话了。</p>
<p>​    我和骚骚在吃饭的时候为了劝骚骚，跟他喝了三瓶啤酒🍺。。而且喝的巨他妈的快，啤酒这东西我到现在都觉得就是用来折磨人的。。又苦又有气，喝多了还不断要上厕所尿尿。。之后我们就去了MIU，无锡的一个club，气氛还可喔，之前一直想蹦迪，上次在江西和夏明九一块的时候，没喝酒去MUSE白嫖的，玩的很尬，两个人就像个二球，尬在里面。所以这次我想着骚骚也是没去过club，刚好我最近考核完想释放一下压力，就点了个散台，遇到的那个花臂女销售看起来好像有点diss我没有买她30块的一包纸巾，人没了，后来一个服务员小哥，长得我感觉有点像阿水，小哥给我说他也可以给我开散台，要喝啥，然后点了个480的伏特加套餐（大概是假酒喝的味道感觉怪怪的），阿水看起来还挺年轻的，我问他卡座低消多少哇他说一千出头吧，问我要开的话也可以帮我开，后来问了下靠近DJ的卡座没了，就算了。简单跟阿水说了几句话，我说绿茶为啥变成果汁了呀，他说都这样，没事，然后还给我说你要还想要果汁的话他可以偷偷给我拿，我看他手就要去拿旁边桌上的果汁了赶紧给他说算了算了我们不需要。后来看骚骚好像也不是特别放得开的，我就想带带气氛吧，就和骚骚喝酒，club的音乐声音是整的释压，我整个人都放开来了，玩玩骰子，酒越喝越多，看骚骚，我想给他喝点又不怕他明天开不了车回家，就没派他喝酒，叫他注意点明天还要开车，骚骚找我去上厕所，其实我不想上，但是陪他去了一趟就是想跟他说几句话的，当时喝的头有点晕了大概是给他说了些不要老是凶人家小大姐，人家小大姐人不错，对你也挺好，不要那绝气样。也不知道他听没听见去，反正我该说的也就这些了，骚骚不是那种能听我说话的人，固执的一批，在我这块的tag，就是外向、搞笑、气氛组组长、有时候成熟有时候幼稚、固执、家里小娇宝、爱发脾气，大概是说啥也听不进去的辣种，回去之后彻底喝大了，场子也热起来了，说话基本都靠在耳边吼才能听见，骚骚一直bb说驴来放个炮（酒吧里那种爆纸片的玩意儿），喝高了之后也萨比了，专门找了阿水（其实可以找其他服务员，但是我觉得阿水人不错就专门去找他拍了拍肩膀），我给他耳边吼说那个炮多少钱呀我也要玩，他给我说，两百，但是推荐我玩那个二氧化碳那个干冰，那个好玩比放炮的划算，我吼算了我朋友就想要哪个炮，给我上一个，后来他就post机一下我，没几分钟他带来了炮，叫我放，我丢，我tm害怕的，我说兄弟你来！我不敢放，他说没事的就按一下开关哈哈，我就举起来狠狠的按一下，爆出来的纸片，虽然只二百块钱， 让我有一种“撒币”的感觉hhh，真的释压，之前超喜欢听DJ喜欢那种低音炮的重响，都是自己周五在家抱着9420自己嗨，喝点小酒自己嗨，在club的气氛还是不一样的，小喜欢，以后还想去（小瘾）。酒的后劲上来了，后面我也不太清醒了，迷糊中看看小怡好像看我眼神不太一样，我在想可能小怡没放开？第一次来少喝点，就稍微叫她少喝点好蹦，然后我记得是给syl说少喝点你不能喝还是啥的，然后又给骚骚说你不要影响明天开车嚎，再后来就真迷迷糊糊了，之后好像阿水给我偷了一瓶伏特加，我吓一跳，我蹦的太嗨，就拳头🤜轻轻锤了一下他胸吼了句谢谢。再后面的我越来越迷糊了，只记得又和骚骚去了趟厕所，遇到了个大花臂听我在和骚骚说沭阳话，就过来搭讪，小兄弟自我介绍说是98的我说我是96的上来就一口一个哥，说最喜欢在外地遇到老乡了，我也是，不知道为啥就感觉这人让我想起来我那些小学同学没上初中或者没上高中辍学在外打工的朋友，很亲切（喝高了），然后加了微信，应该是个销售吧，后面我就搂着去散台了。后面我发现喝有点高了，而且慢慢的有点慌了感觉意识不太清晰，刚好小舒要去卫生间。后面的事情就真的一点都连不起来了，都是些片段。比如骚骚脸色苍白，肚皮发凉，我突然一下慌了，感觉要出事了；吼着阿水说带我朋友出去打120，我给你一千块，阿水说不是钱的问题他在工作出不去；骚骚被抬出酒吧躺在地上，脸色苍白冒冷汗，我吓死了以为是死掉了，坐在地上哭，脑子都是骚骚死了怎么办，我没照顾好朋友；坐在120车上低头哭；坐在急救室门口板凳上哭；“抢救室”蓝底白字灯牌“；“护士，卫生间在哪”；心里难受，凉水冲头；syl在水池旁边好像给我说啥了；小舒怡带我回宾馆…..至于中间是如何怎么连接起来的，一点影响都没了….</p>
<p>​    凌晨的时候骚骚被syl架着送回来了，看到他睁眼说话，脸色好了许多，我心里也放心了。</p>
<p>​    第二天早上起来一点感觉也没了，后来下去买扑克牌的时候喝了瓶红牛一直胃开始难受（萨比了）。早上去骚骚那屋坐了会感觉这一夜真tmd丰富多彩…</p>
<p>​    回南京晚上坐飞机回深了，高铁上出租车上地铁上，头疼胃犯恶心，小怡看起来也累的不行，脸色难看，一直目送我进安检才离开，每次都是一样的不舍…这次连难过的力气都没了。</p>
<p>​    以为终于结束了，回去好好收收心工作了，结果万万没想到这可能才是这段旅途的一半经历。</p>
<p>​    金鹏航空的空姐大概是我见过最好看的了。。拿着一个小程序二维码到处叫扫码，坐下之后那个最漂亮的空姐（感觉好像某个女明星啊）过来。“先生请扫码”，我掏出手机自以为很帅气的扫了个码zzzz，结果低头一看是居然是tmd红码，我淦，我赶紧起来去找那个美女空姐。</p>
<p>​    “你看下我这个码为什么是红色啊”。我拿给她看，她看起来好像是第一次遇到红码一样，也有点不知道改怎么处理，然后叫我先会座位不要慌，他们第一次开始推要用这个粤康码，她也不知道是怎么回事。我看她眼色有点慌，我就先回座位了，以为刚刚推用粤康码大概是程序的bug，后面他们自己解决吧，毕竟我南京以北，都没去过，也没出过过，怎么可能是红码。</p>
<p>​    我回到座位后旁边的大叔操着一口广普：“靓仔你看下我这个码怎么搞呢”，我教了一下他，内心有一点犹豫要不要告诉他我的码是红的。后来想一想算了，反正我没问题，“我不知道为什么我这个码是红色的”，我发现我刚说完，他突然就身体左倾（本来是右倾我教他怎么弄码的），“你这个是不是什么信息没填对呢喔？”“你要不看下怎么搞下还是找下工作人员呢”，我发现我右边的人也看了一下我，我发现有点尴尬，然后我起身又去找那个美女空姐，我往她走过去，我发现她也有点慌张，躲避我的眼色，我找她又问了一遍我行程记录查出来一个月都只有深圳和南京这两个地方，这个情况怎么处理，她说她也不知道，我看想算了，好看的都不中用。然后就找了下一个男的员工，又是一套客套话，叫我先回去，可能是程序有问题，先入座。想一想算了反正我没毛病，还能把我咋样。走一半路想一想妈个鸡冠喔我不想回去做那个萨比大叔旁边了，我就和美女空姐说了句我可以做最后一排吗？我现在这个红码旁边的人都可能不太安心。美女就说好的。</p>
<p>​    后来我就入座最后一排，来了几个人问我行程确认情况我展示了各种码，什么苏康码、i深圳都是绿码，而且行程也没有去过武汉和北京，他们就让我先坐着，后面安排下飞机的时候看机场确认下情况。</p>
<p>​    当时我还觉得问题不大，反正我有好多证明我没去过风险区，过程中还专门找美女空姐要了瓶水我说我好渴（内心OS：吓吓你个傻鸟，老子还专门给你们说让我做最后一排呢），“好好好，有杯子吗？”“没有”，“不好意思先生我们这里矿泉水是对外售卖的，您看..”，“没事我买可是我没有现金，现在飞行模式了”，“没事的，我先去拿给你后面再说”，然后从后面拿了一瓶怡宝给我…</p>
<p>​    一路上头有点疼（大概是被凉水兹的），一直在最后一排睡到到站，后来终于到站了。</p>
<p>​    自信满满的去找小空姐，老子来给你打钱，看你敢要不，结果麻蛋还真要而且还是掏出应该是自己的📱，是个人微信收款…我丢。老子万一是新冠，你送我一瓶矿泉水咋咯。。我毕竟还主动要坐最后一排为别人考虑（内心当然是觉得我自己肯定是健康的啦）</p>
<p>​    后来下飞机之后一个瘦高挑，穿着安保制服的女的，看起来应该是只比我大几岁，有点像我园园大表姐，拿着个对讲机，周围一群人围着他，都是因为手机没信号扫不了码的人，在缠着他，还有一个哭腔（一看就是在装的）的一个女的，说自己是黑龙江的祖籍，但是自己一直不在黑龙家，现在码红了，帮忙看下咋回事，我心里想：有必要吗？还能把你咋，肯定是码有问题呗。一群人都在哪儿乱七八糟的，有一个女的感觉都快急哭了说自己赶着时间，手机没网，我看可怜的，我说我给你开个热点吧你扫一下，小xr那个密码qq123456。然后我就给高挑的女安保说我这里行程和i深圳苏康码都是正常的，这个刚上线的粤康码有bug吧为什么是红色的？然后女安保很客气的让我先放心，帮我先上报一下。后来慢慢的都散光了，后面只剩我和那个黑龙江的女的了。我渐渐感觉mad怎么这么麻烦，后来女安保说上头说了现在不看i深圳只看粤康码，粤康码是红色全部要被防疫办带走隔离的。我一听我草大问题了，很愤怒的跟她说你赶紧给上头汇报啊我这显示说4月份江苏把上传了黄色的中风险地区事件，而且原因那块都是null，肯定是出bug了，你快上报一下啊，我晚上有急事可不能被送去隔离。我一下子人都蒙了…和之前鄙视那个黑龙江的一样怂起来了…后来怎么解释都没有用，我情绪也越来越激动。</p>
<p>​    看出来女安保也一直在请求上面帮忙再核对一下红码旅客的情况，不断的帮我和黑龙江的解释情况，解释苏康码的情况，但是始终得不到有效的回复。</p>
<p>​    我很生气，我觉得很离谱，因为4月份莫名其妙的一个中风险，而且理由是null，就要带去隔离，我完全不讲道理。</p>
<p>​    “这个我们这边也没有办法，12号零点刚下发的红头文件，只看粤康码，是红码立即派去防疫办，送往隔离酒店做核酸检测和自费隔离14天”。</p>
<p>​    我气的捉急，我当时觉得zf公安做事情毫无道理可言，完全不考虑自己出错的情况，我在群里和骚骚他们说情况，骚骚说可以打12345投诉，我就开始打12345投诉，语气很激动的说深圳zf防疫办和公安流程不合理，但是得到的只有一句：“我们这边会记录您的情况，先生我们理解您的心情，麻烦提供下联系方式，我们后续为您跟进您的问题”。</p>
<p>​    我不打12345的话还好，打了之后更有一种被人连环骗的感受，那种绝望，求助无门的绝望，油然而生。</p>
<p>​    后来在机场通道口占了快2个小时，我也已经不再奢望说有人能够理解我了听我解释了，只希望赶紧先让我休息，因为我前两天喝了很多酒，头也有点疼。终于来了套着跟个宇航员一样的防疫服的女人，我看见之后内心很恐慌，我怕我自己没有感染，却被隔离的期间感染了。我又是一顿解释之后，防疫办的人根本不听，附和都不跟你附和一下，就拿着“华为”手机在那拍红码和身份证信息，我过程中没注意说了句“就一点都不考虑这种意外情况下的人情吗”，她抬起头回了句：“这里还有比你更冤的，在这里没有人情可言”。我绝望了。她拿着“华为”手机就走了。让我们在这里等着接去隔离酒店。</p>
<p>​    我在机场通道门口站了两个多小时，本来关节就不好，膝盖疼的受不了，瘫坐在地上又等了好久，女安保在安抚黑龙江，才知道她们是老乡，都是黑龙江的，一直在安抚，黑龙江的一直说自己没回过黑龙江，重复就是那几句话，我头晕而且很累，我只问了一句什么时候来车送我们去酒店。</p>
<p>​    …</p>
<p>​    中转大概有四五次大巴，都没有带出机场，还在等。我渴的不行，和女安保说，“姐我好渴想喝口水可以吗？”，女安保叫司机把门打开（那个车的门很严实，基本是从里面不可能打开，越发恐怖），她跑向机场大厅，没过多久拿了两杯水过来，给我和黑龙江的女的，我知道很不安全，但是渴的不行了，从口罩下面还是喝了一杯。</p>
<p>​    东北的安保女生给我感觉那种性格很像老马姐，老马姐也是那样，做事情感觉挺爽快，不给你绕，而且人心底很善良。我知道她其实只是个机场人员，不是公安的时候，我已经放弃跟她解释了，她还在帮忙上报情况，其实我知道，机场的人怎么左右的了情况吗？防疫办的人只看码，公安的人没人听你解释。我脑子里能救我的，应该只有小程序后台那条if else 逻辑语句。</p>
<p>​    …</p>
<p>​    冰冷的大巴车，空调温度应该是15摄氏度吧，这是托运人的吗？这是在托运冷冻猪肉吧？</p>
<p>​    黑龙江女也不在假哭了。后续陆陆续续又上了三个人。都是苏康码红了的，其中有个寸发大叔，背着个包，上来就坐我前面，我心里突然一咯噔，想换位置不想跟他一起坐。</p>
<p>​    “你们都是码红了吗？我这也是因为苏康码给我弄红了的，这死江苏真tm操蛋啊”</p>
<p>​    我心里一下觉得，应该是和我一样的人吧。</p>
<p>​    后来他主动问我，小兄弟你也是吗？我说是的。后来我发现苏康码可以在支付宝提交信息变更，没准一会儿可以码变绿，我看他大叔也挺惨的就告诉他了，我教他弄了一下。只是想万一这个办法行得通，大家这些被程序逻辑bug搞愿望的人可以没事。</p>
<p>​    “兄弟你是哪的人你咋回事啊”</p>
<p>​    “我江苏宿迁的，之前四月份从深圳回了趟南京，那会儿深圳在江苏这边属于中风险地区，别标黄了但是没拦着，后来苏康码也绿了就没管”</p>
<p>​    “哦我威海的，嗨呀，我是个船员儿，之前在镇江带了几天，再后来从威海要去深圳港口归队”</p>
<p>​    “出海是不是都出国境了？”，我一听说船员吓一跳，出海大概是出国了吧，现在国外这么严重。</p>
<p>​    “是的，出了，但是就没上过岸，床上就我们几个船员，和这大巴车上一样，五六个人。”，威海大叔说道。“这广东zf没事找事做，搞什么粤康码就是在骗钱，这下事情可遭了，在深圳这边住酒店14天得个大几千呢啊，这个是笔不小的钱啊”</p>
<p>​    我心里：想嗨呀zf就算再坑你，也不会想坑你这点钱啊，而且十四天咋可能得大几千，也就两三千吧。</p>
<p>​    后来我心态也没了，整个人都蔫了。</p>
<p>​    “这空调温度也太低了吧，想冻死人吗”，一个同车的连云港的说道。</p>
<p>​    后来我听见坐在车头的女安保在问空调能关吗？司机说关不了，要不开窗户吧，车外有热风。“再坚持一下，马上到了，很快的”，女安保说。</p>
<p>​    车内窗户打开，外面的热浪和大巴车内的冷气混合着，但是我还是觉得冷气更胜一筹。</p>
<p>​    等了好久才到隔离酒店。到了之后，发现一个看起来有点老实的那种酒店环境，有个院子，院子里的人有穿着防疫服的，有穿着警服的，有便衣的。被安排下车的时候，门口的保安似乎是在躲着我们，往后退了几步，我不确定是否是我太敏感了，我很希望是。</p>
<p>​    在院子的左边支起了棚子，坐着几个医护人员吧，穿的很厚的防疫服，跟电视机里新闻的一样。我坐下来，黑龙江的女的又开始疯狂bb，哭腔又来了，还是那一套说辞。录信息的医护人员好像都已经听习惯了，就一直点头听着，然后问一些信息。</p>
<p>​    “你叫什么名字多少岁了”，我对面的女医护说。</p>
<p>​    我回答了之后又是一大篇问题。</p>
<p>​    “心理状况如何？良好吗？” 她说。</p>
<p>​    我犹豫了三四秒。“良好”。</p>
<p>​    “之前有过自残行为吗？”</p>
<p>​    “没有”。</p>
<p>​    “对本次防疫措施有什么看法吗？”，</p>
<p>​    我看了下选项有：1. 完全理解；2. 部分理解，有不认可的地方；3. 完全不理解。医护的笔已经放在1上了准备勾了。</p>
<p>​    很激动，想张口说3，但是略怂，语气大了点说这个我选2。</p>
<p>​    “曾经有没有对人生感到有很大的挫败感？”    </p>
<p>​    “我觉得我现在就很失败的”。</p>
<p>​    小医护笑的不行，说哎呀这有啥这就失败了，我们这医院还没遇到过阳性的呢。</p>
<p>​    我心里笑了下，但是假装没感情，吓一吓她。</p>
<p>​    然后要手机进行注册一些东西，我手机没电了，就去问了下机场的女安保。“姐，我手机没电了，1%，一会儿我怕人家不给我说话，能帮我问下有没有ios的充电线吗？”。然后她跑去大厅问了下人，然后跑回来说，“没事的房间都有充电头。你现在手续搬完了去大厅办入住吧。”</p>
<p>​    我一脸sm脸，然后到大厅有个小哥过来说“请把你的包放在这个上面过安检”，我心里想，滚吧，老子就不知道这是要过安检的。</p>
<p>​    后来我放上去了，才发现吗的，他过完安检要开包。他很温柔的给我说“您好，我们这边是要搜一下您的包的，能麻烦打开给我们看下吗”</p>
<p>​    我知道这很过分，So what? What can I do? 我打开了书包拉链。</p>
<p>​    “我们这里是不允许带一些特定药物进去的，还有一些管制刀具啊一些尖锐的，我看下有没有哈”，然后他拿出我的发蜡问了句这是什么哈，我说这不是药，这是发蜡。然后我突然想起来我带了周五要吃的甲氨蝶呤，就问了下他，他看了下之后叫我等一下，需要问下医护，然后跑出去问了下刚刚的医护，没多久，医护跑了进来问了句，你是怎么了啊为什么吃这个药？</p>
<blockquote>
<p> <strong>氨甲蝶呤</strong>（英语：Methotrexate，又称<strong>甲氨喋呤</strong>、<strong>甲氨蝶呤</strong>、<strong>氨甲喋呤</strong>；在台湾，学名为<strong>胺基甲基叶酸</strong>，商品名为<strong>灭杀除癌锭</strong>及<strong>治善锭</strong>。）氨甲蝶呤是一种<a href="https://zh.wikipedia.org/wiki/化療藥物" target="_blank" rel="noopener">化疗药物</a>和<a href="https://zh.wikipedia.org/wiki/免疫抑制劑" target="_blank" rel="noopener">免疫抑制剂</a><a href="https://zh.wikipedia.org/wiki/氨甲蝶呤#cite_note-AHFS2016-5" target="_blank" rel="noopener">[5]</a>，被用来治疗<a href="https://zh.wikipedia.org/wiki/癌症" target="_blank" rel="noopener">癌症</a>、<a href="https://zh.wikipedia.org/wiki/自體免疫疾病" target="_blank" rel="noopener">自体免疫疾病</a>、<a href="https://zh.wikipedia.org/wiki/子宮外孕" target="_blank" rel="noopener">子宫外孕</a>和进行药物流产<a href="https://zh.wikipedia.org/wiki/氨甲蝶呤#cite_note-AHFS2016-5" target="_blank" rel="noopener">[5]</a> 。可治疗的癌症类型包含<a href="https://zh.wikipedia.org/wiki/乳癌" target="_blank" rel="noopener">乳癌</a>、<a href="https://zh.wikipedia.org/wiki/白血病" target="_blank" rel="noopener">白血病</a>、<a href="https://zh.wikipedia.org/wiki/肺癌" target="_blank" rel="noopener">肺癌</a>、<a href="https://zh.wikipedia.org/wiki/淋巴癌" target="_blank" rel="noopener">淋巴癌</a>和<a href="https://zh.wikipedia.org/w/index.php?title=骨肉瘤&action=edit&redlink=1" target="_blank" rel="noopener">骨肉瘤</a><a href="https://zh.wikipedia.org/wiki/氨甲蝶呤#cite_note-AHFS2016-5" target="_blank" rel="noopener">[5]</a> 。可治疗的自体免疫疾病包含<a href="https://zh.wikipedia.org/wiki/銀屑病" target="_blank" rel="noopener">银屑病</a>、<a href="https://zh.wikipedia.org/wiki/类风湿性关节炎" target="_blank" rel="noopener">类风湿性关节炎</a>和<a href="https://zh.wikipedia.org/wiki/克隆氏症" target="_blank" rel="noopener">克隆氏症</a><a href="https://zh.wikipedia.org/wiki/氨甲蝶呤#cite_note-AHFS2016-5" target="_blank" rel="noopener">[5]</a> 。使用方式为口服或注射<a href="https://zh.wikipedia.org/wiki/氨甲蝶呤#cite_note-AHFS2016-5" target="_blank" rel="noopener">[5]</a> 。）</p>
</blockquote>
<p>​    我从她眼神里面看出来有一点害怕和同情。“我有关节炎”，我就知道她肯定会很慌张。</p>
<p>​    “哦哦，这个药给他吧”。</p>
<p>​    我拿着要到柜台办理入住，虽然隔着笨重的防护服，但是我明显能看出来柜台的医护年级应该比我小啊，而且我能明显看到她的手在抖，是真的在抖。我突然心里意识到，这次疫情真的很严重，已经严重影响人们的正常生活了，我突然也有一点点开始理解为什么不管什么原因红码都要隔离了（虽然我的码是真冤枉）</p>
<p>​    “em..你好你房卡办好了，费用是200一天，需要您支付14天的房钱，另外酒店提供的早午晚饭一天是100块，这个您自己支付，也可以自己点外卖，我们会帮您送上去，外卖不允许有易拉罐、烧烤签这样的尖锐锋利物品，您看能接受吗？”</p>
<p>​    “嗯”。</p>
<p>​    之后就来到房间入住了。</p>
<p>​    房间真的是老式的酒店，无论是大屁股的电视机还是床头那个时间错了显示着“2004.1.1”的电话，都让我感觉很不舒服。3点的夜，外面院子里灯还亮着，我站窗边看了好久，看着威海大叔还在跟着院子里的可能是领导的公安争执着，但是还是被送进大厅办入住。</p>
<p>​    我想洗个澡，进入卫生间，发现酒店内什么都没有，尤其是灯光也是疮黄的，让我心里很不舒服。</p>
<p>​    我决定不洗澡了，头也很重。躺在床上，心里没有怨恨，没有担心，没有迷茫，当然也没什么希望（我心理状况还ok，只是可能很累，心里什么都没想）。</p>
<p>​    …</p>
<p>​    第二天早上，我头不知道为什么变得更疼了（就是比有点疼还疼，但是不是很疼），我拿起手机看了下，发现周一了，企业微信又是一大堆消息。心里很难受也很烦躁，小怡也在一直说啥（小舒怡你大爷的哦）。看到骚骚的消息说要联系溧阳市第九军区空指部炸掉宝安机场，我笑了。</p>
<p>​    门铃突然响了。</p>
<p>​    “嘴张开，啊..”，昨天那个在机场说没人情的医护来做核酸检测了，我认得她，包着防护服我也认识她那双刻薄的眼睛。我从她眼睛里也看出来她认得我了。测完后，我瞪了她一眼，就关门了。</p>
<p>​    …</p>
<p>​    在房间处理了一下工作的事情。网太差了，动不动就断线，很烦躁。不断的问酒店的医护，我核酸结果什么时候可以出来啊。</p>
<p>​    …</p>
<p>​    下午的时候微信上收到酒店的消息，说我是阴性，收拾行李可以下来了。</p>
<p>​    // TODO wechat pic</p>
<p>​    我收拾东西办了手续，拿着核酸检测报告，印了手指印，走出酒店门口。</p>
<p>​    我问了个公安的，“你们包接不包送吗？”</p>
<p>​    …</p>
<p>​    下午五点多的华茂航空酒店大门口的树荫凉…嗯，跟tm没有一样热。</p>
<p>​    我准备打车回了。滴滴了一下南山区xx花园。预计70块。车来了之后上车了，刚准备关门，看见威海的大叔。他看见我说兄弟我这没打过滴滴，这附近没出租，能拼一下车不。</p>
<p>​    我心里想算了，即使让正常的人来决策，肯定都是不让他上车的，特殊情况。但是我还是说，“嗯，可以”。因为你们没有我的经历。</p>
<p>​    在之前，我一直都觉得哇靠靠，中国牛逼，这次疫情在中国这么快就被抑制住了，就应该强制隔离，就应该这样！但是当我是个被强制的时候，心里也有点不是滋味。</p>
<p>​    …</p>
<p>​    车上，威海大叔和我聊天，还在吐槽这zf管他的事情。说这就是在骗他的钱，</p>
<p>​    我问“你交了2800了没”</p>
<p>​    他说“我没交，我就交了200，他能退给我就退，不能退给我就算，就当住酒店了。这江苏的苏康码真他妈操蛋，我从昨天上飞机之前到现在就吃了一碗7块钱的泡面，真是害死人。你昨天晚上睡着了没？”</p>
<p>​    “我睡着了，我前天喝了点酒头很疼”。</p>
<p>​    “我这一宿没睡，我一晚上给镇江政务局、114、12345、还有威海的都打了电话，没几个接的，我这一晚上都没睡着觉，就怕这今天出不来耽误我归队啊”</p>
<p>​    “啊好吧”</p>
<p>​    “这打车钱怎么算啊，我给你打一半的钱吧，唉师傅，能给我打车的发票不”。</p>
<p>​    滴滴司机：“现在在去南山区xx花园，你和这兄弟协商下看怎么搞吧，滴滴只能打电子发票。”</p>
<p>​    我说：“我加你微信吧，我到了xx花园修改目的地，给你送到蛇口的港口酒店。之后我把发票发给你，你打一半钱给我”。</p>
<p>​    “好好”。他说。</p>
<p>​    “其实你都可以坐着我打的车到蛇口，然后删了我微信。”。。其实他难道没发现他可以打着我的车然后下车删了我的微信不给我钱吗？</p>
<p>​    “嗨，咋能这样，我们在社会上做事的，都是靠的诚信，怎么还能骗你呢？”</p>
<p>​    出租车司机说：“这样，你到蛇口起码得个一百多，你给这小兄弟打一百块钱，到了之后多退少补？”。（内心OS，那这样岂大叔请我坐车了。。）</p>
<p>​    “也可以吧，兄弟你一定要把发票给我发过来啊，我这得找公家报销呢”，“我们北方人就是不绕弯，讲诚信，当时我去这个单位就是因为他不要我xx证明”（忘记啥证明了）</p>
<p>​    …</p>
<p>​    我到了xx花园之后下车回到了家。</p>
<p>​    “滴滴滴，密码正确请进”。</p>
<p>​    </p>
<p>​    这三四天过的我真的心力憔悴。回到家还是打开电脑记录了一下。</p>
<p>​    这几天的经历之后，成长了不少。就是这一路上遇到形形色色不同的人，包括未来可能遇到更多不同于我日常生活密切相处的人，构建出来我对整个社会整个人生的价值观。</p>
<p>​    </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://qmloong.github.io/2020/06/28/network/bridge/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="menglong">
      <meta itemprop="description" content="Love is a heroic dream in a tired life.🐬">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qmloong's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/28/network/bridge/" class="post-title-link" itemprop="url">network/bridge</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-28 22:24:17 / 修改时间：22:24:44" itemprop="dateCreated datePublished" datetime="2020-06-28T22:24:17+08:00">2020-06-28</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="linux-bridge"><a href="#linux-bridge" class="headerlink" title="linux bridge"></a>linux bridge</h1>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://qmloong.github.io/2020/06/23/kubernetes/kube-apiserver/deep-dive-to-apiserver/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="menglong">
      <meta itemprop="description" content="Love is a heroic dream in a tired life.🐬">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qmloong's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/23/kubernetes/kube-apiserver/deep-dive-to-apiserver/" class="post-title-link" itemprop="url">kubernetes/kube-apiserver/deep-dive-to-apiserver</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-23 00:17:16 / 修改时间：09:45:01" itemprop="dateCreated datePublished" datetime="2020-06-23T00:17:16+08:00">2020-06-23</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>理解APIServer的神作</p>
<p><a href="https://www.mgasch.com/post/k8sevents/" target="_blank" rel="noopener">https://www.mgasch.com/post/k8sevents/</a></p>
<p><a href="https://www.openshift.com/blog/kubernetes-deep-dive-api-server-part-1" target="_blank" rel="noopener">https://www.openshift.com/blog/kubernetes-deep-dive-api-server-part-1</a></p>
<p><a href="https://www.openshift.com/blog/kubernetes-deep-dive-api-server-part-2" target="_blank" rel="noopener">https://www.openshift.com/blog/kubernetes-deep-dive-api-server-part-2</a></p>
<p><a href="https://www.openshift.com/blog/kubernetes-deep-dive-api-server-part-3a" target="_blank" rel="noopener">https://www.openshift.com/blog/kubernetes-deep-dive-api-server-part-3a</a></p>
<p><a href="https://www.openshift.com/blog/kubernetes-deep-dive-code-generation-customresources" target="_blank" rel="noopener">https://www.openshift.com/blog/kubernetes-deep-dive-code-generation-customresources</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://qmloong.github.io/2020/06/14/kubernetes/kube-apiserver/authn&authz/overview/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="menglong">
      <meta itemprop="description" content="Love is a heroic dream in a tired life.🐬">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qmloong's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/14/kubernetes/kube-apiserver/authn&authz/overview/" class="post-title-link" itemprop="url">kubernetes/kube-apiserver/authn&authz/overview</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-14 22:12:53 / 修改时间：22:19:41" itemprop="dateCreated datePublished" datetime="2020-06-14T22:12:53+08:00">2020-06-14</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Kubernetes访问控制"><a href="#Kubernetes访问控制" class="headerlink" title="Kubernetes访问控制"></a>Kubernetes访问控制</h2><p>当不同的子账户都拥有访问同一个TKE Kubernetes集群资源权限的之后，如何保证不同的子账户，对于集群有着不同的角色和权限呢？让我们来首先从社区的Kubernetes访问链路开始分析整个过程，从而向您介绍TKE是如何实现容器服务子账户对接Kubernetes的认证授权体系。</p>
<h3 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h3><p>首先从宏观的角度看下Kubernetes的请求链路是如何进行的。</p>
<p><img src="/2020/06/14/kubernetes/kube-apiserver/authn&authz/overview/access-control-overview.svg" alt="Diagram of request handling steps for Kubernetes API request"></p>
<p>图片来源于k8s社区官网。</p>
<p>可以大概了解到一个请求的链路是依次通过Authentication（认证，简称Authn）、Authorization（授权，简称Authz）、AdmissionControl（准入控制），从而获取到后端ETCD的数据。</p>
<p>从图中可以看到Authn、Authz、AdmissionControl是由多个模块组成的，每个步骤都有多种方式构成的。</p>
<p>下面我们来一次看下准入过程中的每个步骤吧。</p>
<h3 id="Kubernetes认证"><a href="#Kubernetes认证" class="headerlink" title="Kubernetes认证"></a>Kubernetes认证</h3><p>认证的过程的证明user身份的过程。</p>
<p>Kubernetes中有两类用户，一类是ServiceAccount，一类是集群真实的用户。</p>
<p>ServiceAccount账户是由Kubernetes提供API（资源）进行创建和管理的，ServiceAccount可以认为是特殊的Secret资源，可用户集群内资源访问APIServer的认证所用。通过可以通过mount的方式挂载到Pod内进行使用。</p>
<p>真实的用户通常是从外部发起请求访问APIServer，由管理员进行管理认证凭证，而Kubernetes本身不管理任何的用户和凭证信息的，即所有的用户都是逻辑上的用户，无法通过API调用Kubernetes API进行创建真实用户。</p>
<p>Kubernetes认证的方式众多，常见的有TLS客户端证书双向认证、BearerToken认证、BasicAuthorization或认证代理（WebHook）</p>
<p>所有的认证方式都是以插件的形式串联在认证链路中，只要有一种认证方式通过，即可通过认证模块，且后续的认证方式不会被执行。</p>
<p>在此处参考一点点Kubernetes APIServer Authentication模块的代码，可以发现，任何的认证方式都是一下Interface的实现方式都是接收http Request请求，然后会返回一个user.Info的结构体，一个bool，以及一个error</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Request attempts to extract authentication information from a request and returns</span></span><br><span class="line"><span class="comment">// information about the current user and true if successful, false if not successful,</span></span><br><span class="line"><span class="comment">// or an error if the request could not be checked.</span></span><br><span class="line"><span class="keyword">type</span> Request <span class="keyword">interface</span> &#123;</span><br><span class="line">   AuthenticateRequest(req *http.Request) (user.Info, <span class="keyword">bool</span>, error)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>user.Info中包含了用户的信息，包括UserName、UUID、Group、Extra。</p>
<p>bool返回了用户是否通过认证，false的话即返回无法通过认证，即返回401错误。</p>
<p>error则返回了当Request无法被检查的错误，如果遇到错误则会继续进行下一种注册的方式进行认证。</p>
<p>如果认证通过，则会把user.Info写入到到请求的context中，后续请求过程可以随时获取用户信息，比如授权时进行鉴权。</p>
<p>下面我会以Kubernetes代码中的认证方式顺序，并加以TKE开启的认证方式来向你介绍TKE创建的Kubernetes集群默认的认证策略。</p>
<h4 id="RequestHeader"><a href="#RequestHeader" class="headerlink" title="RequestHeader"></a>RequestHeader</h4><p>正向代理用到的，TODO</p>
<h4 id="Basic-Authentication"><a href="#Basic-Authentication" class="headerlink" title="Basic Authentication"></a>Basic Authentication</h4><p>APIServer启动参数<code>--basic-auth-file=SOMEFILE</code>指定basic认证的csv文件，在APIServer启动之后修改此文件都不会生效，需要重启APIServer来更新basic authentication的token。csv文件格式为：<code>token,user,uid,&quot;group1,group2,group3&quot;</code>。</p>
<p>请求时，需要指定HTTP Header中Authentication为Basic，并跟上Base64Encode(user:passward)值。</p>
<p>为了方便起见，目前TKE的集群都会指定一个system:masters组（此组默认绑定集群的admin权限）的basic authentication的token csv文件。</p>
<h4 id="x509客户端证书"><a href="#x509客户端证书" class="headerlink" title="x509客户端证书"></a>x509客户端证书</h4><p>APIServer启动参数<code>--client-ca-file=SOMEFILE</code>指定CA证书，而在TKE的K8S集群创建过程中，会对集群进行自签名CA密钥和证书用于管理，如果用户下发的客户端证书是由此CA证书的密钥签发的，那么就可以通过客户端证书认证，并使用客户端证书中的CommonName、Group字段分别作为Kubernetes的UserInfo中Username和Group信息。</p>
<p>目前TKE对接子账户都是通过自签名的CA凭证进行签发子账户Uin对应CN的客户端证书。</p>
<h4 id="Bearer-Token"><a href="#Bearer-Token" class="headerlink" title="Bearer Token"></a>Bearer Token</h4><p>Bearer Token的认证方式包含很多，比如启动参数指定的、ServiceAccount（也是一种BeaerToken）、BootstrapToken、OIDCIssure、WebhookToken</p>
<h5 id="默认指定Token-csv文件"><a href="#默认指定Token-csv文件" class="headerlink" title="默认指定Token csv文件"></a><strong>默认指定Token csv文件</strong></h5><p>APIServer启动参数<code>--token-auth-file=SOMEFILE</code>指定Bearer Token认证的csv文件。和Basic Authentication方式相似，只不过请求APIServer时，指定的HTTP认证方式为Bearer方式。此Bearer后直接跟passward即可。csv文件格式为：<code>password,user,uid,&quot;group1,group2,group3&quot;</code>。</p>
<p>请求时，需要指定HTTP Header中Authentication为Bearer，并跟上Base64Encode(user:passward)值。</p>
<p>为了方便起见，目前TKE的集群都会指定一个system:masters组（此组默认绑定集群的admin权限）的bearer token csv文件。</p>
<h5 id="ServiceAccount"><a href="#ServiceAccount" class="headerlink" title="ServiceAccount"></a><strong>ServiceAccount</strong></h5><p>这种方式即之前提到的“两种用户”中常见的集群内认证方式，ServiceAccount。</p>
<h5 id="BootstrapToken"><a href="#BootstrapToken" class="headerlink" title="BootstrapToken"></a><strong>BootstrapToken</strong></h5><p>此项开关在Kubernetes v1.18版本中才为stable版本，此类Token是专门用来引导集群安装使用的，需要配合controller-manager的TokenCleaner。</p>
<h5 id="OpenID-Connect-Tokens"><a href="#OpenID-Connect-Tokens" class="headerlink" title="OpenID Connect Tokens"></a><strong>OpenID Connect Tokens</strong></h5><p>OIDCToken的认证方式是结合OAuth2向身份提供方获取ID Token来访问APIServer。</p>
<p>如需要开启此项功能，需要在APIServer的启动参数中指定oidc的配置参数，例如<code>--oidc-issuer-url</code>指定oidc身份提供方的地址，<code>--oidc-client-id</code>指定身份提供方侧的账户ID，<code>--oidc-username-claim</code>身份提供方的用户名。</p>
<p>具体可参考<a href="https://kubernetes.io/docs/reference/access-authn-authz/authentication/#openid-connect-tokens" target="_blank" rel="noopener">Kubernetes官方文档</a></p>
<h5 id="Webhook-Token-Server"><a href="#Webhook-Token-Server" class="headerlink" title="Webhook Token Server"></a><strong>Webhook Token Server</strong></h5><p>Webhook Token是一种hook的方式来校验是否认证通过。</p>
<p>APIServer启动参数<code>--authentication-token-webhook-config-file</code>及<code>--authentication-token-webhook-cache-ttl</code>来分别指定Webhook地址以及token的cache ttl。</p>
<p>若APiServer开启此方式进行认证校验，则在接受到用户的Request之后，会包装Bearer Token成一个<code>TokenReview</code>发送给WebHookServer，Server端接收到之后会进行校验，并返回<code>TokenReview</code>接口，在status字段中进行反馈是否通过校验通过和user.Info信息。</p>
<h5 id="Anonymous-requests"><a href="#Anonymous-requests" class="headerlink" title="Anonymous requests"></a><strong>Anonymous requests</strong></h5><h3 id="Kubernetes授权"><a href="#Kubernetes授权" class="headerlink" title="Kubernetes授权"></a>Kubernetes授权</h3><p>当Request通过Kube-APIServer的认证模块之后，就会来到鉴权模块。通过上面的讲解了解到可以认证的过程，会进行构建用户的RequestInfo，其中包含用户信息，包括UserName、UUID、Group、Extra。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://qmloong.github.io/2020/06/12/design-patterns/strategy/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="menglong">
      <meta itemprop="description" content="Love is a heroic dream in a tired life.🐬">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qmloong's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/12/design-patterns/strategy/" class="post-title-link" itemprop="url">design-patterns/strategy</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-12 00:58:06 / 修改时间：01:00:50" itemprop="dateCreated datePublished" datetime="2020-06-12T00:58:06+08:00">2020-06-12</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/design-patterns/" itemprop="url" rel="index"><span itemprop="name">design-patterns</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Strategy"><a href="#Strategy" class="headerlink" title="Strategy"></a>Strategy</h1><p>策略模式，依赖多种算法的时候，把算法交接出去，算法的改动不影响调用方</p>
<p>K8s里面每个资源都会写自己的Stratedy，然后注册到Store核心结构体上。</p>
<p><img src="/2020/06/12/design-patterns/strategy/image-20200612010023971.png" alt="image-20200612010023971"></p>
<p><img src="/2020/06/12/design-patterns/strategy/image-20200612010046745.png" alt="image-20200612010046745"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://qmloong.github.io/2020/06/10/kubernetes/kube-apiserver/other-feature/admission-controller/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="menglong">
      <meta itemprop="description" content="Love is a heroic dream in a tired life.🐬">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qmloong's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/10/kubernetes/kube-apiserver/other-feature/admission-controller/" class="post-title-link" itemprop="url">kubernetes/kube-apiserver/other-feature/admission-controller</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-06-10 00:48:26" itemprop="dateCreated datePublished" datetime="2020-06-10T00:48:26+08:00">2020-06-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-06-14 22:37:28" itemprop="dateModified" datetime="2020-06-14T22:37:28+08:00">2020-06-14</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Admission-Controller"><a href="#Admission-Controller" class="headerlink" title="Admission-Controller"></a>Admission-Controller</h1><h2 id="什么是admission-controller？"><a href="#什么是admission-controller？" class="headerlink" title="什么是admission-controller？"></a>什么是admission-controller？</h2><blockquote>
<p>In a nutshell, Kubernetes admission controllers are plugins that govern and enforce how the cluster is used.</p>
</blockquote>
<p>admission controller是k8s的插件，用来管理和强制用户如何来操作集群。</p>
<p>Admission controller主要分为两个phase，一个是mutating，一个是validating。这两个阶段都是在authn&amp;authz之后的，mutating做的变更准入，就是会对request的resource，进行转换，比如填充默认的requestLimit？而validating admission的意思就是验证准入，比如校验pod副本数必须大于2。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/06/10/kubernetes/kube-apiserver/other-feature/admission-controller/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://qmloong.github.io/2020/06/09/kubernetes/network/k8s-network/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="menglong">
      <meta itemprop="description" content="Love is a heroic dream in a tired life.🐬">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qmloong's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/09/kubernetes/network/k8s-network/" class="post-title-link" itemprop="url">kubernetes/network/k8s-network</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-06-09 17:18:49" itemprop="dateCreated datePublished" datetime="2020-06-09T17:18:49+08:00">2020-06-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-06-27 22:43:35" itemprop="dateModified" datetime="2020-06-27T22:43:35+08:00">2020-06-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/kubernetes/" itemprop="url" rel="index"><span itemprop="name">kubernetes</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="单机容器网络"><a href="#单机容器网络" class="headerlink" title="单机容器网络"></a>单机容器网络</h1><h3 id="容器bridge网络模式"><a href="#容器bridge网络模式" class="headerlink" title="容器bridge网络模式"></a>容器bridge网络模式</h3><p>首先container1的network namespace内默认路由会走到eth0，而eth0实际是一个veth pair设备。对端是挂载docker0网桥上的一个虚拟网卡，而挂载到虚拟网桥上的虚拟网卡会弱化成docker0网桥的一个端口（此端口为三层设备的端口），他不具备处理数据包的能力，流入该网卡的数据包会直接到托管的网桥上进行处理，即docker0网桥扮演着二层交换机设备，和三层路由器设备。container2同理。</p>
<p>容器内路由示例</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ route</span><br><span class="line">Kernel<span class="built_in"> IP routing </span>tableDestination Gateway Genmask Flags Metric Ref Use Iface</span><br><span class="line">default 172.17.0.1 0.0.0.0 UG 0 0 0 eth0</span><br><span class="line">172.17.0.0 0.0.0.0 255.255.0.0 U 0 0 0 eth0</span><br></pre></td></tr></table></figure>

<p>默认路由走docker0，由docker0处理，而172.17.0.0/16即容器网段的话，需要内核协议栈直接发包，直接发的话需要考虑进行ARP。</p>
<p>route命令返回Gataway是0.0.0.0的，表示是直连，数据包应该经过eth0直接发往目的主机。</p>
<h3 id="container1想要访问container2的场景分析"><a href="#container1想要访问container2的场景分析" class="headerlink" title="container1想要访问container2的场景分析"></a>container1想要访问container2的场景分析</h3><p><img src="/2020/06/09/kubernetes/network/k8s-network/e0d28e0371f93af619e91a86eda99a66.png" alt="img"></p>
<p>container1(172.17.0.2)发送目的地址为container2(172.17.0.3)的数据包，首先依据默认路由将数据包发送至eth0虚拟网卡，但是由于默认路由是0.0.0.0，所以是直接发送，即需要知道172.17.0.3的Mac地址，进行ARP协议，而发送ARP协议docker0就会收到，收到之后docker0也发在网桥设备上扮演交换机的角色进行广播ARP，172.17.0.3容器就会收到，然后返回自己的Mac地址。之后container1就可以直接发送数据包</p>
<h3 id="宿主机上进程想要访问container1时的场景分析"><a href="#宿主机上进程想要访问container1时的场景分析" class="headerlink" title="宿主机上进程想要访问container1时的场景分析"></a>宿主机上进程想要访问container1时的场景分析</h3><p><img src="/2020/06/09/kubernetes/network/k8s-network/9fb381d1e49318bb6a67bda3f9db6901.png" alt="img"></p>
<p>宿主机发包，ip route发现应该发往docker0，发往docker0之后docker0就会进行转发到对于的veth，容器内对端的eth0就会收到数据。</p>
<h3 id="container1想要访问宿主机路由可达的场景分析"><a href="#container1想要访问宿主机路由可达的场景分析" class="headerlink" title="container1想要访问宿主机路由可达的场景分析"></a>container1想要访问宿主机路由可达的场景分析</h3><p><img src="/2020/06/09/kubernetes/network/k8s-network/90bd630c0723ea8a1fb7ccd738ad1f95.png" alt="img"></p>
<p>eth0访问主机子网内的其他宿主机的话，包经过docker0，到达宿主机，通过宿主机路由规则进行转发，到达Node2</p>
<h3 id="容器host网络模式"><a href="#容器host网络模式" class="headerlink" title="容器host网络模式"></a>容器host网络模式</h3><p>和宿主机公用网络，容器没有单独的network namespace。这样性能好，但是需要考虑端口冲突</p>
<h1 id="跨宿主机网络互通"><a href="#跨宿主机网络互通" class="headerlink" title="跨宿主机网络互通"></a>跨宿主机网络互通</h1><p><img src="/2020/06/09/kubernetes/network/k8s-network/b4387a992352109398a66d1dbe6e413d.png" alt="img"></p>
<p>如何在Node1上的容器访问Node2，因为Node之间默认没有路由配置的话，无法知道其他容器应该如何转发，所以需要需要在宿主机上进行配置路由规则，构建一层overlay网络，或者需要做一层特殊的网桥配置。</p>
<p>Flannel是CoreOS公司出的一个容器网络解决方案，是一种框架。有host-gw模式、UDP、VXLAN模式。</p>
<h3 id="UDP模式"><a href="#UDP模式" class="headerlink" title="UDP模式"></a>UDP模式</h3><p><img src="/2020/06/09/kubernetes/network/k8s-network/8332564c0547bf46d1fbba2a1e0e166c.jpg" alt="img"></p>
<p>通过Node1上的flannel0虚拟TUN网桥（TUN，隧道，Linux内核支持，用户态和内核态之间传递数据包），flannel0的用户态进程就是flanneld进程，收到数据包会转发给flanneld监听的8285端口，flanneld回去查子网对应的信息，信息存在etcd中。封装UDP包发送到对端Node2的flanneld，而TUN设备进程收到数据包后会直接传入内核flannel0，根据路由转发到Node2的docker0，接收到之后进入容器网络。</p>
<p>但是UDP模式存在性能问题：</p>
<p><img src="/2020/06/09/kubernetes/network/k8s-network/84caa6dc3f9dcdf8b88b56bd2e22138d.png" alt="img"></p>
<p>container1到docker0是一次必要的跨用户态和内核态数据拷贝。flannel0需要再拷贝给flanneld，flanneld还需要再拷贝给eth0走主机网络协议栈转发UDP包。进行了3次跨内核态拷贝。</p>
<h3 id="VXLAN"><a href="#VXLAN" class="headerlink" title="VXLAN"></a>VXLAN</h3><p><img src="/2020/06/09/kubernetes/network/k8s-network/03185fab251a833fef7ed6665d5049f5.jpg" alt="img"></p>
<p>VXLAN（Virtual Extensible LAN 虚拟可扩展局域网）是内核支持的一种网络虚拟化技术，原理是在宿主机上通过一张特殊的“隧道口”设备——VTEP（VXLAN Tunnel End Point VXLAN 虚拟隧道端点），这个和UDP模式的flanneld的工作很像，传入进去的数据包都会被对端的flanneld进程收到，而VXLAN模式下，传入VTEP设备的数据包都会被对端的VTEP接收到。</p>
<p>container1和container2的传输实际内核的处理流程是：</p>
<p>container1有目标容器的ip地址，经过docker0的数据包在宿主机的路由下（该路由表明Node2上的vxlan ip cidr都走到固定的网关，该网关ip即Node2的VTEP设备的ip，是在Node2加入到vxlan网络的时候注册到每个节点上的）会到本机Node1的VTEP设备（flannel.1），VTEP设备会将数据包补充二层需要的MAC地址并包装为数据帧，这个MAC地址是在Node2注册进vxlan的时候注入进来的，是由flannel网络下每个flanneld进程进行注入的数据，即Node2的VTEP设备ip），此后，包装好了VXLAN的数据头包装UDP，传入到Node1宿主机，但是宿主机并不知道该发往哪个宿主机，因为Node1的宿主机只知道这是一个VTEP发出的普通的UDP包，而该数据包应该发往哪个宿主机呢？并没有一个VTEP和宿主机IP的对应关系，所以flanneld还会在FDB中维护一个flannel VTEP的Mac对应宿主机IP的映射。有了目的主机IP就很容易的发往到Node2了。包装的头部如下图：</p>
<p><img src="/2020/06/09/kubernetes/network/k8s-network/8cede8f74a57617494027ba137383f85.jpg" alt="img"></p>
<p><strong>一点疑惑：</strong></p>
<p>问：为什么要用UDP来封装VXLAN隧道用到的Header？</p>
<p>答：</p>
<p>1、不需要可靠。因为这个udp里面包裹的是tcp的内容，收发双端如果发现丢包，还是会重传的。<br>2、局域网环境下，可靠性有一定保障，不会因为使用了udp造成频繁丢包。<br>3、udp开销小。</p>
<p>问：VTEP信息和所在NodeIP是如何下发的？</p>
<p>答：各个node会将自己的vtep信息上报给apiserver，apiserver将信息同步给各个节点的flanneld，flanneld通过netlink下发，完成信息的同步</p>
<p>问：VXLAN使用UDP的话，UDP的端口是干嘛用的？</p>
<p>VXLAN协议规范指出：目的端口需要使用固定的端口号，源端口可以固定也可以随机，具体参考VXLAN文档吧</p>
<p><strong>DIY VXLAN</strong>：<a href="https://github.com/mz1999/blog/blob/master/docs/docker-overlay-networks.md" target="_blank" rel="noopener">https://github.com/mz1999/blog/blob/master/docs/docker-overlay-networks.md</a></p>
<h1 id="k8S网络-amp-CNI"><a href="#k8S网络-amp-CNI" class="headerlink" title="k8S网络&amp;CNI"></a>k8S网络&amp;CNI</h1>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://qmloong.github.io/2020/06/09/kubernetes/proposal/api-conventions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="menglong">
      <meta itemprop="description" content="Love is a heroic dream in a tired life.🐬">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qmloong's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/09/kubernetes/proposal/api-conventions/" class="post-title-link" itemprop="url">kubernetes/proposal/api-conventions</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-06-09 00:48:34 / 修改时间：00:50:34" itemprop="dateCreated datePublished" datetime="2020-06-09T00:48:34+08:00">2020-06-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/kubernetes/" itemprop="url" rel="index"><span itemprop="name">kubernetes</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="API规范"><a href="#API规范" class="headerlink" title="API规范"></a>API规范</h1><p>这篇proposal是定义一个API的流程规范，有兴趣的可以阅读<a href="https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md" target="_blank" rel="noopener">原文</a></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/06/09/kubernetes/proposal/api-conventions/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://qmloong.github.io/2020/06/08/kubernetes/proposal/api-change/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="menglong">
      <meta itemprop="description" content="Love is a heroic dream in a tired life.🐬">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qmloong's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/08/kubernetes/proposal/api-change/" class="post-title-link" itemprop="url">kubernetes/proposal/api-change</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-06-08 23:01:51" itemprop="dateCreated datePublished" datetime="2020-06-08T23:01:51+08:00">2020-06-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-06-09 00:49:26" itemprop="dateModified" datetime="2020-06-09T00:49:26+08:00">2020-06-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/kubernetes/" itemprop="url" rel="index"><span itemprop="name">kubernetes</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="API变更规范"><a href="#API变更规范" class="headerlink" title="API变更规范"></a>API变更规范</h1><p>这篇proposal是变更规范，通过这篇变更规范，来理解多版本的API是如何工作的，有兴趣可以读一读<a href="https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api_changes.md#readme" target="_blank" rel="noopener">原文</a>。也会涉及定义一个API的流程，而详细的设计API的规范文档，是<a href="https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md" target="_blank" rel="noopener">这篇</a></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/06/08/kubernetes/proposal/api-change/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://qmloong.github.io/2020/06/08/kubernetes/kube-controller-manager/workqueue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="menglong">
      <meta itemprop="description" content="Love is a heroic dream in a tired life.🐬">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qmloong's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/08/kubernetes/kube-controller-manager/workqueue/" class="post-title-link" itemprop="url">kubernetes/kube-controller-manager/workqueue</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-06-08 01:20:42" itemprop="dateCreated datePublished" datetime="2020-06-08T01:20:42+08:00">2020-06-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-06-09 00:51:04" itemprop="dateModified" datetime="2020-06-09T00:51:04+08:00">2020-06-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/kubernetes/" itemprop="url" rel="index"><span itemprop="name">kubernetes</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="WorkQueue"><a href="#WorkQueue" class="headerlink" title="WorkQueue"></a>WorkQueue</h1><h2 id="为什么需要WokrQueue"><a href="#为什么需要WokrQueue" class="headerlink" title="为什么需要WokrQueue"></a>为什么需要WokrQueue</h2><ol>
<li>chan不好吗？chan不是可以实现带buffer的chan吗？</li>
<li>需要workqueue的原因不是抛弃chan不用，而是对chan进行包装，因为原生的chan功能太单一，无法实现丰富的场景</li>
<li>kubernetes的controller众多，而informer也只是事件通知，参考之前的总览图可以，在业务逻辑处理和informer通知事件到来之间，需要一层缓存来解耦业务逻辑和事件通知，不可以让事件通知阻塞在业务逻辑的处理上，因为一般业务逻辑处理可能是比较耗时的。这也是为什么informer的EventHandler的BestPractices是只做简单的对比和入队操作。防止业务逻辑处理拉胯掉informer的事件通知。</li>
</ol>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/06/08/kubernetes/kube-controller-manager/workqueue/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">menglong</p>
  <div class="site-description" itemprop="description">Love is a heroic dream in a tired life.🐬</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">43</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">24</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/qmloong" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;qmloong" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:qmlfighting@gmail.com" title="E-Mail → mailto:qmlfighting@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">menglong</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  















  

  

</body>
</html>
