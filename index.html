<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"qmloong.github.io","root":"/","scheme":"Pisces","version":"8.0.0-rc.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":"mac"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"manual"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Love is a heroic dream in a tired life.🐬">
<meta property="og:type" content="website">
<meta property="og:title" content="qmloong&#39;s Blog">
<meta property="og:url" content="https://qmloong.github.io/index.html">
<meta property="og:site_name" content="qmloong&#39;s Blog">
<meta property="og:description" content="Love is a heroic dream in a tired life.🐬">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="menglong">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://qmloong.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>qmloong's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
        <span class="toggle-line toggle-line-first"></span>
        <span class="toggle-line toggle-line-middle"></span>
        <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">qmloong's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://qmloong.github.io/2021/04/30/kubernetes/cluster-autoscaler/clusterautoscaler-handover/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="menglong">
      <meta itemprop="description" content="Love is a heroic dream in a tired life.🐬">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qmloong's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/04/30/kubernetes/cluster-autoscaler/clusterautoscaler-handover/" class="post-title-link" itemprop="url">kubernetes/cluster-autoscaler/clusterautoscaler-handover</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-04-30 12:00:17 / 修改时间：16:42:27" itemprop="dateCreated datePublished" datetime="2021-04-30T12:00:17+08:00">2021-04-30</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="cluster-autoscaler"><a href="#cluster-autoscaler" class="headerlink" title="cluster-autoscaler"></a>cluster-autoscaler</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>cluster-autoscaler是社区提供的自动伸缩组件，可以依据集群当前需求来自动的调节集群的节点规模，一般和云厂商绑定，需要用户实现cloudprovider部分来实现。</p>
<h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><h2 id="社区"><a href="#社区" class="headerlink" title="社区"></a>社区</h2><h2 id="未来的发展"><a href="#未来的发展" class="headerlink" title="未来的发展"></a>未来的发展</h2><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://qmloong.github.io/2021/01/03/2020/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="menglong">
      <meta itemprop="description" content="Love is a heroic dream in a tired life.🐬">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qmloong's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/03/2020/" class="post-title-link" itemprop="url">2020</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-01-03 10:31:52 / 修改时间：11:46:54" itemprop="dateCreated datePublished" datetime="2021-01-03T10:31:52+08:00">2021-01-03</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="2020"><a href="#2020" class="headerlink" title="2020"></a>2020</h1><p>​    2020算是完完整整的过了一年打工人的一年，心态上也成熟了许多，从埋头苦干到漂浮不定到踏踏实实。</p>
<p>​    回首2019H2、2020H1，开新区、和运维扯皮、半夜处理工单，来了先处理了半年的helper问题，然后又是半年集群杂七杂八的事情，忙的自己焦头烂额，还没产出。但是一直却没有意识到，就知道好累呀，不过也没有心态上的变化，就埋头苦干，处理了无数的工单，后来gary招了外包妹子之后，只能说稍微好一点点点吧..这一点点还不是在工作上的转变，是心态上的转变，因为自己可能觉得自己也不是个freshman了，也可以带带人了，可以把自己半年被各种乱七八糟七零八落的团队业务知识输出，一方面在指导新人的时候有成就感，一方面也会发现自己对团队也有很深的理解。之前安慰自己处理现网问题可以让我更加理解业务，在这里也算是「自证预言」了。</p>
<p>​    但是2020H1结束的时候，心态上有一些变化，因为2020H1甚至2020H2前期，我仍然是在处理现网问题，不停的处理工单、回答问题，让我真的很疲累，已经没有了刚来时候的那些成就感，发现自己还是在处理重复的问题。再加上新来的毕业生，没有接替我的工作，让我心里觉得很不平衡，自我预言crash掉了，而且自己也没有刚来时候的那么fresh了， 发现运维一些现象自己特别不爽也是直接怼，有一次真的是被运维气的头晕，气的我直接8点下班了。在这种工作内容重复、合作伙伴扯皮、内心的不平衡以及得不到老板的认可的情况下，经常会觉得这个团队不想呆了不想呆，经常有时候很气的时候就抱着电脑下班回去刷题刷到夜里。</p>
<p>​    后来也不知道具体是因为什么，突然自己的心态就得到了“质变”，自己之前一直想去搞新东西，比如Knative，etcd产品化，不想维护集群这坨shit了，但是在一次etcd的评审会上，gary并不想让我牵扯到etcd中去，knative也只搞了个需求，跟TCB的会上也无从下手，这个一方面是simo没有交接过来，一方面是TCB还没有完全信任knative。最后H2的组织架构调整，彻底打散了我想逃的想法，容器团队按组分变成按业务分，我还是被化到了负责集群这块，我猜测也正是因为这样，我的心也定了下来吧，开始去思考如何把集群这块“做大做强，再创辉煌”，开玩笑，是想办法去收敛问题，之前的一句现网问题收敛，在工作了一年之后才有了真的体会，开始着手思考如何去提升TKE集群这个核心模块的质量了。开始主动拉例会讨论集群专项，张罗张罗新人对shit进行重构。整理输出集群质量周报，有针对性的进行分析现网问题。而且2020H2这最后一两个月，也全身心的开始投入到工作中，最最重要的是gary也鼓励了我做重构的事情，虽然在方案上狠狠吊了我，但是不要紧，因为起码大方向是对我认可的。</p>
<p>​    还记得在学校的时候，gary就和我聊天，说现在团队里各个模块都确认，你现在早点再来实习，可以选择的机会也特别的多，当时的我顾着在学校和同学玩婉拒了，如果我现在能回到2019年H1绝对会去给自己来一嘴巴子，其实我个人对网络那块比较感兴趣，唉算了，既来之则安之，搞集群这块就把他搞的服服帖帖！搞！</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://qmloong.github.io/2020/11/10/life/friendship/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="menglong">
      <meta itemprop="description" content="Love is a heroic dream in a tired life.🐬">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qmloong's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/10/life/friendship/" class="post-title-link" itemprop="url">life/friendship</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-11-10 13:26:19" itemprop="dateCreated datePublished" datetime="2020-11-10T13:26:19+08:00">2020-11-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-11-16 09:13:06" itemprop="dateModified" datetime="2020-11-16T09:13:06+08:00">2020-11-16</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://qmloong.github.io/2020/10/20/cloud-native/concept/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="menglong">
      <meta itemprop="description" content="Love is a heroic dream in a tired life.🐬">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qmloong's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/20/cloud-native/concept/" class="post-title-link" itemprop="url">cloud-native/concept</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-10-20 23:25:35 / 修改时间：23:39:33" itemprop="dateCreated datePublished" datetime="2020-10-20T23:25:35+08:00">2020-10-20</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Cloud-Native"><a href="#Cloud-Native" class="headerlink" title="Cloud-Native"></a>Cloud-Native</h1><h2 id="什么是云原生？"><a href="#什么是云原生？" class="headerlink" title="什么是云原生？"></a>什么是云原生？</h2><p>云原生这个词在随着云计算的发展，咱们可能在越来越多的人口中听到？那么到底什么是云原生呢？</p>
<p>云原生：Cloud-Native，组合词，Cloud，即云上，表示应用程序或者软件架构处于云上，而不是传统的数据中心、自建物理机房；Native，即原生，表示软件设计之初就面向底层IaaS是云而不是具体的某个固定的平台，为云为设计的软件。那么CloudNative应用那么其实就是说这个软件是面向云端的设计理念，可以充分发挥云的<strong>弹性伸缩</strong>和<strong>分布式</strong>优势。</p>
<h2 id="云原生的特点？"><a href="#云原生的特点？" class="headerlink" title="云原生的特点？"></a>云原生的特点？</h2><p>因为从2013年云原生被VMWare的《迁移到云原生架构》一文首次提出：<strong>12因素、微服务、自敏捷架构、基于API协作、扛脆弱性</strong>，到2015年又改口风：<strong>模块化、可观察、可部署、可测试、可替换、可处理6特质</strong>；而现在官网又变了描述，目前最新的解释是：<strong>DevOps+持续交付+微服务+容器</strong></p>
<p>可以结合Knative来思考什么是云原生，因为Knative就是一个云原生Severless架构。</p>
<h2 id="一句话描述云原生？"><a href="#一句话描述云原生？" class="headerlink" title="一句话描述云原生？"></a>一句话描述云原生？</h2><p><strong>总而言之，符合云原生架构的应用程序应该是：采用开源堆栈（K8S+Docker）进行容器化，基于微服务架构提高灵活性和可维护性，借助敏捷方法、DevOps支持持续迭代和运维自动化，利用云平台设施实现弹性伸缩、动态调度、优化资源利用率。</strong></p>
<p>（从下往上答：基础设施容器化和云平台的特性-&gt;软件微服务框架-&gt;软件敏捷开发</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://qmloong.github.io/2020/10/12/life/20201012/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="menglong">
      <meta itemprop="description" content="Love is a heroic dream in a tired life.🐬">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qmloong's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/12/life/20201012/" class="post-title-link" itemprop="url">life/20201012</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-10-12 10:04:22 / 修改时间：10:06:39" itemprop="dateCreated datePublished" datetime="2020-10-12T10:04:22+08:00">2020-10-12</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>一个人，越炫什么，就越缺什么</strong></p>
<p>叔本华曾说：“生命是一团欲望，不能满足便痛苦，满足便无聊，人生就在痛苦和无聊之间摇摆。”</p>
<p>深以为然。</p>
<p>膨胀的欲念，让人永不满足，这是痛苦的源头。做人，千万不要欲念太深。</p>
<p><strong>懂得知足，才是真正的富足。</strong></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://qmloong.github.io/2020/09/24/logic/guess-birthday/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="menglong">
      <meta itemprop="description" content="Love is a heroic dream in a tired life.🐬">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qmloong's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/24/logic/guess-birthday/" class="post-title-link" itemprop="url">logic/guess-birthday</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-09-24 13:13:00 / 修改时间：13:52:12" itemprop="dateCreated datePublished" datetime="2020-09-24T13:13:00+08:00">2020-09-24</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>今天遇到一到很有争议的逻辑推理题</p>
<h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p>小A和小B都是张老师的学生，张老师的生日是M月N日，<br>　　2人都知道张老师的生日是下列10组中的一天，<br>　　张老师把M值告诉了小A，把N值告诉了小B，<br>　　张老师问他们知道他的生日是那一天吗?<br>　　3月4日 3月5日 3月8日<br>　　6月4日 6月7日<br>　　9月1日 9月5日<br>　　12月1日 12月2日 12月8日<br>　　小A说：如果我不知道的话，小B肯定也不知道<br>　　小B说：本来我也不知道，但是现在我知道了<br>　　小A说：哦，那我也知道了<br>　　请根据以上对话推断出张老师的生日是哪一天</p>
<h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1><p>可以从逻辑的角度去分析这两个人说的话，很容易推出来是9.1号。但是我觉得这题目本身就存在一个很邪乎的第一句话，有违正常人的说话思维。</p>
<p>因为首先张老师出这道题问两个学生的背景就是看谁能先猜出来。而且他们都知道这生日的范围是这十天。</p>
<p>所以当A知道B知道的M日的时候，A已经能排除日子不是7号和2号了，因为如果是7和2号的话，B直接就能抢答了。</p>
<p>另外我们也可以再进一步分析出来，A这沙雕肯定不是拿的6月，因为如果B不抢答的话，说明不是7号，那么如果老师的月份是6月的话，A自己都可以抢答是6月4号了，因为7号不可能，6月只有个4号了。</p>
<p>因此排除了6月所有，和一个12月2日。</p>
<p>　　3月4日 3月5日 3月8日<br>　　9月1日 9月5日<br>　　12月1日 12月8日</p>
<p>然后开始分析A和B的对话</p>
<p>小A说：如果我不知道的话，小B肯定也不知道。</p>
<p>他说这句话要么很傻逼说实话要么很心机说假话炸胡故意让B知道知道不是6月4号了。因为这个时候如果B是4号的话， 那么只要让B知道A不抢答6月4号，B就可以抢答是3月4号了。所以如果日期是4号的话，那么只要A不抢答B就可以报生日了，但是A说了句如果我不知道的话，B也不知道，这也是没办法的，只能赌不是4号了。</p>
<p>结果小B说：本来我也不知道，但是现在我知道了</p>
<p>那么就完了，看来日子真的是4号，肯定日期就是3月4号了。因为其他的日期都对应着两个月份，只有4号对应着3月4号了。</p>
<p>最后A又说了句，我也知道了。 </p>
<p>所以是3月4号。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://qmloong.github.io/2020/09/12/network/ssh/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="menglong">
      <meta itemprop="description" content="Love is a heroic dream in a tired life.🐬">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qmloong's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/12/network/ssh/" class="post-title-link" itemprop="url">network/ssh</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-09-12 16:41:54" itemprop="dateCreated datePublished" datetime="2020-09-12T16:41:54+08:00">2020-09-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-11-12 00:10:25" itemprop="dateModified" datetime="2020-11-12T00:10:25+08:00">2020-11-12</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="SSH-amp-Proxy-amp-隧道"><a href="#SSH-amp-Proxy-amp-隧道" class="headerlink" title="SSH &amp; Proxy &amp; 隧道"></a>SSH &amp; Proxy &amp; 隧道</h1><p>经常用ssh，但是从来没有好好的研究过ssh的协议原理，周末太无聊了，就看下这块叭。</p>
<p>ssh是一种能够在非安全的网络链路上，实现信息的加密、完整可靠传输。</p>
<p>ssh以非对称加密实现身份的验证，通常可以用密码登录和密钥登录。</p>
<p>ssh在tcp之下，这也是为什么ssh可以做转发隧道的原因，可以包装tcp/udp协议。</p>
<h2 id="SSH的-L-R-D参数"><a href="#SSH的-L-R-D参数" class="headerlink" title="SSH的-L/-R/-D参数"></a>SSH的-L/-R/-D参数</h2><p>-L 和 -R 其实是属于端口转发，而不属于代理的范畴。所谓正向代理和反向代理，其实更准确一点说应该是取决于你代理的agent是在服务端还是客户端，如果是在客户端的代理，叫做正向的代理，如果是在server端的代理，叫做反向代理，反向代理可以联想到nginx作为server的反向代理。</p>
<p>而-D参数则是属于socket代理，属于一种正向的socket代理</p>
<h3 id="L-bind-address-port-host-hostport"><a href="#L-bind-address-port-host-hostport" class="headerlink" title="-L [bind_address:]port:host:hostport"></a>-L [bind_address:]port:host:hostport</h3><blockquote>
<p>Specifies that the given port on the local (client) host is to be forwarded to the given host and port on the remote side.</p>
</blockquote>
<p>正向代理，本地绑定一个端口，再指定一个host:hostport，所有访问本地这个port的流量都会通过这个ssh链接转发到对端的host:hostport上。</p>
<h3 id="R-bind-address-port-host-hostport"><a href="#R-bind-address-port-host-hostport" class="headerlink" title="-R [bind_address:]port:host:hostport"></a>-R [bind_address:]port:host:hostport</h3><blockquote>
<p> Specifies that the given port on the remote (server) host is to be forwarded to the given host and port on the local side.This works by allocating a socket to listen to port on the remote side, and whenever a connection is made to this port, the connection is forwarded over the secure channel,  and a connection is made to host port hostport from the local machine.</p>
</blockquote>
<p>反向代理，指定对端port，host和hostport是本地可以访问的一个地址，那么链接建立完毕之后，对端主机访问这个port的流量就相当于转发到本地能够访问的host:hostport上。<strong>这是一种内网穿透技术，比如内网主机A和B和公网主机C，只有A可以访问公网，B不可以，如果B上有敏感数据的话，在A上进行-R把B的某些内网服务端口暴露给了C上的某个端口，那么外网就可以自由自在的进行访问B的内网服务了</strong></p>
<h3 id="D-bind-address-port"><a href="#D-bind-address-port" class="headerlink" title="-D  [bind_address:]port"></a>-D  [bind_address:]port</h3><blockquote>
<p>Specifies a local ``dynamic’’ application-level port forwarding.  This works by allocating a socket to listen to port on the local side, optionally  bound to the specified bind_address.  Whenever a connection is made to this port, the connection is forwarded over the secure channel, and the application protocol is then used to determine where to connect to from the remote machine.  Currently the SOCKS4 and SOCKS5 protocols are supported, and ssh will act as a SOCKS server.  Only root can forward privileged ports.  Dynamic port forwardings can also be specified in the configuration file.</p>
</blockquote>
<p>socks5代理，相当于本地起一个socks5代理。所有流量配置了socks5代理转发到本地的这个端口，都会被当做是在remote主机上进行发包一样。</p>
<blockquote>
<p><strong>socks5和http代理的区别？</strong></p>
<p>socks是一种协议是SOCKetS的缩写，位于会话层和传输层之间，socks5是发展过来是一个版本，socks5的代理是基于tcp的，简历</p>
</blockquote>
<h2 id="proxy"><a href="#proxy" class="headerlink" title="proxy"></a>proxy</h2><p>所谓的proxy，才是真正的代理，正方向代理</p>
<p>常见的正向代理有proxfier、shadowsocks</p>
<h2 id="隧道"><a href="#隧道" class="headerlink" title="隧道"></a>隧道</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://qmloong.github.io/2020/09/10/cloud-native/istio/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="menglong">
      <meta itemprop="description" content="Love is a heroic dream in a tired life.🐬">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qmloong's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/10/cloud-native/istio/" class="post-title-link" itemprop="url">cloud-native/istio</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-09-10 18:09:30 / 修改时间：18:09:42" itemprop="dateCreated datePublished" datetime="2020-09-10T18:09:30+08:00">2020-09-10</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Istio"><a href="#Istio" class="headerlink" title="Istio"></a>Istio</h1>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://qmloong.github.io/2020/09/10/cloud-native/knative/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="menglong">
      <meta itemprop="description" content="Love is a heroic dream in a tired life.🐬">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qmloong's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/10/cloud-native/knative/" class="post-title-link" itemprop="url">cloud-native/knative</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-09-10 18:09:18" itemprop="dateCreated datePublished" datetime="2020-09-10T18:09:18+08:00">2020-09-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-09-14 21:38:33" itemprop="dateModified" datetime="2020-09-14T21:38:33+08:00">2020-09-14</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Knative"><a href="#Knative" class="headerlink" title="Knative"></a>Knative</h1><h2 id="Knative-Serving"><a href="#Knative-Serving" class="headerlink" title="Knative Serving"></a>Knative Serving</h2><p>Knative Serving基于k8s的无状态服务，快速部署、弹性伸缩、容器资源调度、多版本管理，和istio的服务治理能力，实现serveless应用or函数部署。</p>
<ul>
<li>快速部署serverless应用</li>
<li>自动伸缩</li>
<li>基于istio的路由和网络编程</li>
<li>代码快照，其实就是k8s rs的多版本化管理</li>
</ul>
<h2 id="Knative-Serving的CRD资源"><a href="#Knative-Serving的CRD资源" class="headerlink" title="Knative Serving的CRD资源"></a>Knative Serving的CRD资源</h2><p><img src="/2020/09/10/cloud-native/knative/42bd1041a25845626e36258d090a8085.png" alt="Knative 系列（三）：Serving篇"></p>
<h3 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h3><p>Service资源是一个可以管理workload所有生命周期的资源定义，他包括了Route、Configuration、Revision</p>
<h3 id="Route"><a href="#Route" class="headerlink" title="Route"></a>Route</h3><p>配置endpoint对应到哪个revision</p>
<h3 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h3><p>记录保持部署所需的状态，可以理解为</p>
<h3 id="Revision"><a href="#Revision" class="headerlink" title="Revision"></a>Revision</h3><h3 id="Serving-原理"><a href="#Serving-原理" class="headerlink" title="Serving 原理"></a>Serving 原理</h3><p>Serving 总共有 5 个组件，其中 4 个在 knative-serving 这个 namespace 下面，是 controller 、webhook 、autoscaler、activator 这四个组件；还有一个 queue, 运行在每个应用的 pod 里，作为 pod 的 sidecar 存在。</p>
<p>\1. Controller 负载 Service 整个生命周期的管理，涉及、Configuration、Route、Revision 等的 CURD。<br>\2. Webhook 主要负责创建和更新的参数校验。<br>\3. Autoscaler 根据应用的请求并发量对应用扩缩容。<br>\4. Activator 在应用缩容到 0 后，拦截用户的请求，通知 autoscaler 启动相应应用实例，等待启动后将请求转发。<br>\5. Queue 负载拦截转发给 Pod 的请求，用于统计 Pod 的请求并发量等，autoscaler 会访问 queue 获取相应数据对应用扩缩容。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://qmloong.github.io/2020/09/10/network/http/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="menglong">
      <meta itemprop="description" content="Love is a heroic dream in a tired life.🐬">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="qmloong's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/10/network/http/" class="post-title-link" itemprop="url">network/http</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-09-10 13:18:56" itemprop="dateCreated datePublished" datetime="2020-09-10T13:18:56+08:00">2020-09-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-09-12 20:21:15" itemprop="dateModified" datetime="2020-09-12T20:21:15+08:00">2020-09-12</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h1><h2 id="http的长连接和短链接？"><a href="#http的长连接和短链接？" class="headerlink" title="http的长连接和短链接？"></a>http的长连接和短链接？</h2><p>http是基于tcp的，所以http的长连接和短链接都依赖tcp的长短链接。</p>
<p>tcp是面向连接的，会进行三次握手四次回收建立socket连接，<strong>TCP本身没有长短连接的说法</strong>，完全是取决于上层协议怎么使用TCP</p>
<ul>
<li>短连接：每次传输都重新握手和挥手</li>
<li>长连接：建立连接之后保持连接，不进行挥手操作，TCP协议里没有保活部分，但是OS都会进行keep-alive</li>
</ul>
<p>而http的短链接在/2020/09/10/network/http/1.0之前都是默认短链接，在/2020/09/10/network/http/1.1之后默认都是Keep-alive的。<code>Connection:keep-alive</code></p>
<p>思考：</p>
<p>长连接的会带来的问题，Server端不主动断开连接的话，如何知道哪些client是活跃的，哪些是不活跃的呢？连接满了之后如何进行清理老连接呢？</p>
<p>TODO</p>
<h2 id="Golang-http实现分析"><a href="#Golang-http实现分析" class="headerlink" title="Golang http实现分析"></a>Golang http实现分析</h2><p><a href="https://blog.csdn.net/kdpujie/article/details/73177179" target="_blank" rel="noopener">https://blog.csdn.net/kdpujie/article/details/73177179</a></p>
<p><a href="https://xiequan.info/go-http-client%E8%BF%9E%E6%8E%A5%E4%BC%98%E5%8C%96/" target="_blank" rel="noopener">https://xiequan.info/go-http-client%E8%BF%9E%E6%8E%A5%E4%BC%98%E5%8C%96/</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">menglong</p>
  <div class="site-description" itemprop="description">Love is a heroic dream in a tired life.🐬</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">56</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">24</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/qmloong" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;qmloong" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:qmlfighting@gmail.com" title="E-Mail → mailto:qmlfighting@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">menglong</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  















  

  

</body>
</html>
